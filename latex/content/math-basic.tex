\newsavebox{\mathfontsone}
\newsavebox{\mathfontstwo}
\newsavebox{\mathfontsthree}
\newsavebox{\mathfontsfour}

\begin{lrbox}{\mathfontsone}
  \begin{lstlisting}
    \usepackage{fontspec}

    \usepackage{amsmath}   % unverzichtbare Mathe-Befehle
    \usepackage{amssymb}   % viele Mathe-Symbole
    \usepackage{mathtools} % Erweiterungen für amsmath
  \end{lstlisting}
\end{lrbox}

\begin{lrbox}{\mathfontstwo}
  \begin{lstlisting}
    \usepackage{fontspec}

    \usepackage{amsmath}   % unverzichtbare Mathe-Befehle
    \usepackage{amssymb}   % viele Mathe-Symbole
    \usepackage{mathtools} % Erweiterungen für amsmath

    \usepackage[





    ]{unicode-math}      % "Does exactly what it says on the tin."
    % Laden von OTF-Mathefonts
    % Ermöglich Unicode Eingabe von Zeichen: α statt \alpha
  \end{lstlisting}
\end{lrbox}

\begin{lrbox}{\mathfontsthree}
  \begin{lstlisting}
    \usepackage{fontspec}

    \usepackage{amsmath}   % unverzichtbare Mathe-Befehle
    \usepackage{amssymb}   % viele Mathe-Symbole
    \usepackage{mathtools} % Erweiterungen für amsmath

    \usepackage[
      math-style=ISO,    % \
      bold-style=ISO,    % |
      sans-style=italic, % | ISO-Standard folgen
      nabla=upright,     % |
      partial=upright,   % /
    ]{unicode-math}      % "Does exactly what it says on the tin."
    % Laden von OTF-Mathefonts
    % Ermöglich Unicode Eingabe von Zeichen: α statt \alpha
  \end{lstlisting}
\end{lrbox}

\begin{lrbox}{\mathfontsfour}
  \begin{lstlisting}
    \usepackage{fontspec}

    \usepackage{amsmath}   % unverzichtbare Mathe-Befehle
    \usepackage{amssymb}   % viele Mathe-Symbole
    \usepackage{mathtools} % Erweiterungen für amsmath

    \usepackage[
      math-style=ISO,    % \
      bold-style=ISO,    % |
      sans-style=italic, % | ISO-Standard folgen
      nabla=upright,     % |
      partial=upright,   % /
    ]{unicode-math}      % "Does exactly what it says on the tin."
    % Laden von OTF-Mathefonts
    % Ermöglich Unicode Eingabe von Zeichen: α statt \alpha

    \setmathfont{Latin Modern Math}
    % \setmathfont{Tex Gyre Pagella Math} % alternativ
  \end{lstlisting}
\end{lrbox}

\begin{frame}[fragile,t]{
  Benötigte Pakete
  \hfill
  \doc{http://mirrors.ctan.org/macros/latex/required/amsmath/amsldoc.pdf}{amsmath}
  \doc{http://mirrors.ctan.org/macros/latex/contrib/mathtools/mathtools.pdf}{mathtools}
  \doc{http://mirrors.ctan.org/macros/latex/contrib/unicode-math/unicode-math.pdf}{unicode-math}
}

  \vspace{5pt}
  \only<1>{\usebox{\mathfontsone}}
  \only<2>{\usebox{\mathfontstwo}}
  \only<3>{\usebox{\mathfontsthree}}
  \only<4>{\usebox{\mathfontsfour}}
\end{frame}

\begin{frame}[fragile]{\lstinline+\$...\$+-Umgebung}
  Aktiviert den Mathematikmodus im Fließtext.

  \begin{CodeExample}{0.6}[\TeX{} sorgt für gute Abstände]
    \begin{lstlisting}
      $x    =     5$, $y=3$
    \end{lstlisting}
  \CodeResult
    \strut
    $x    =     5$, $y=3$
  \end{CodeExample}

  \begin{CodeExample}{0.6}[Satzzeichen u.\ Bindestriche gehören nicht in \lstinline+\$...\$+]
    \begin{lstlisting}
      Dies ist eine Variable: $x$.
      Liste von Variablen $x$, $y$, $z$.
      $y$-Achse, $x$-$y$-Ebene
    \end{lstlisting}
  \CodeResult
    \strut
    Dies ist eine Variable: $x$. \\
    Liste von Variablen $x$, $y$, $z$. \\
    $y$-Achse, $x$-$y$-Ebene
  \end{CodeExample}
  \begin{CodeExample}{0.6}[Vorsicht bei der Höhe von Formeln im Text]
    \begin{lstlisting}
      Text ohne eine Bedeutung.
      Mit einer Formel:
      $\frac{1}{1- \frac{1}{1 - x}}$
      Text ohne eine Bedeutung.
    \end{lstlisting}
  \CodeResult
    \hrule
    Text ohne eine Bedeutung.
    \hrule
    Mit einer Formel: $\frac{1}{1- \frac{1}{1 - x}}$
    \hrule
    Text ohne eine Bedeutung.
    \hrule
  \end{CodeExample}
\end{frame}

\begin{frame}[fragile]{Griechisch und mehr}
  \begin{CodeExample}{0.72}
    \begin{lstlisting}
      \epsilon \theta \kappa \pi \rho \sigma \phi
      \varepsilon \vartheta \varkappa \varpi \varrho \varsigma \varphi
      \Alpha \Beta \Gamma
      \hbar \imath \jmath \ell
      \partial \nabla \square \increment
      \infty \diameter
    \end{lstlisting}
  \CodeResult
    \strut
    \Umathordordspacing\textstyle=4mu
    $\epsilon \theta \kappa \pi \rho \sigma \phi$ \\
    $\varepsilon \vartheta \varkappa \varpi \varrho \varsigma \varphi$ \\[\baselineskip]
    $\Alpha \Beta \Gamma$ \\
    $\hbar \imath \jmath \ell$ \\
    $\partial \nabla \square \increment$ \\
    $\infty \diameter$
  \end{CodeExample}
\end{frame}

\begin{frame}[fragile]{Operatoren und Relationen}
  \vspace{-1em}
  \begin{CodeExample}{0.74}
    \begin{lstlisting}
      + - / \cdot \times
      \pm \mp
      < > \leq \geq
      = \simeq \equiv \cong
      \approx \propto \sim
      \coloneq \eqcolon
      \to \iff \implies
      \mapsto \leadsto
      \forall \exists \in \subset \cup \cap
    \end{lstlisting}
  \CodeResult
    \Umathbinbinspacing\textstyle=4mu
    \Umathrelrelspacing\textstyle=4mu
    $+ - / \cdot \times$\\
    $\pm \mp$\\
    $< >\leq \geq$ \\
    $= \simeq \equiv \cong$\\
    $\approx \propto \sim$ \\
    $\coloneq \quad \eqcolon$ \\
    $\to \iff \implies$ \\
    $\mapsto \leadsto$ \\
    $\forall \exists \in \subset \cup \cap$
  \end{CodeExample}
  \begin{CodeExample}{0.74}[Negierte Variante mit \texttt{n} bzw.\ \texttt{not}]
    \begin{lstlisting}
      \neq \nsime \nexists \nni \notin
    \end{lstlisting}
  \CodeResult
    \Umathbinbinspacing\textstyle=4mu
    \Umathrelrelspacing\textstyle=4mu
  $\neq \nsime \nexists \nni \notin$
  \end{CodeExample}
  \begin{CodeExample}{0.74}[Häufig möchte man etwas über eine Relation schreiben:]
    \begin{lstlisting}
      \stackrel{!}{=} \stackrel{\text{def}}{=}
    \end{lstlisting}
  \CodeResult
  \vspace{2ex}
  $\smash{\stackrel{!}{=} \quad \stackrel{\text{def}}{=}}$
  \end{CodeExample}
\end{frame}

\begin{frame}[fragile]{Indizes / Exponenten}
  \begin{CodeExample}{0.60}
    \begin{lstlisting}
      x^2 x_2 x²
    \end{lstlisting}
  \CodeResult
    \strut
    $x^2 \quad x_2 \quad x²$
  \end{CodeExample}
  \vspace{-3ex}
  \begin{columns}[onlytextwidth]
    \begin{column}{0.6\textwidth}
      \begin{CodeExample}{0.50}[Falsch]
        \vspace{0.5\baselineskip}
        \begin{lstlisting}[lineskip=0.5ex]
          x^10
          x^2^2
          x_\sqrt[3]{2}
        \end{lstlisting}
      \CodeResult
        \removedisplayskip
        \begin{flalign*}
          & x^10 \\
          & \text{\alert{\faExclamationTriangle{} Error \faExclamationTriangle{}}}\\
          & \text{\alert{\faExclamationTriangle{} Error \faExclamationTriangle{}}}
        \end{flalign*}
      \end{CodeExample}
    \end{column}%
    \hfill%
    \begin{column}{0.38\textwidth}
      \begin{CodeExample}{0.70}[Richtig]
        \vspace{0.5\baselineskip}
        \begin{lstlisting}[lineskip=0.5ex]
          x^{10}
          x^{2^2}
          x_{\sqrt[3]{2}}
        \end{lstlisting}
      \CodeResult
        \removedisplayskip
        \begin{flalign*}
          & x^{10} \\
          & x^{2^2} \\
          & \smash{x_{\sqrt[3]{2}}}
        \end{flalign*}
      \end{CodeExample}
    \end{column}%
  \end{columns}
  \begin{CodeExample}{0.60}[Text in Indizes]
    \begin{lstlisting}
      falsch: x_{min},  richtig: x_\text{min}
    \end{lstlisting}
  \CodeResult
    \strut
    falsch: $x_{min}$, \quad richtig: $x_\text{min}$
  \end{CodeExample}
  \begin{CodeExample}{0.60}[Striche \& Linksseitiges]
    \begin{lstlisting}
      x' x^' x'' x'^2
      {}^2 x
    \end{lstlisting}
  \CodeResult
    \strut
    $x' \quad x^{'} \quad x'' \quad x'^2$ \\
    ${}^2 x$
  \end{CodeExample}
  \vspace*{-1pt}
  Nur wenige Befehle können ohne \lstinline+{ }+ im Index stehen.
\end{frame}

\begin{frame}[fragile]{Akzente}
  \begin{CodeExample}{0.70}
    \begin{lstlisting}
      \bar{x}
      \hat{x}
      \tilde{x}
      \vec{x}
      \mathring{x}
      \dot{x} \ddot{x} \dddot{x} \ddddot{x}
      \underline{xy} \overline{xy}
    \end{lstlisting}
  \CodeResult
    \strut
    \Umathordordspacing\textstyle=4mu
    $\bar{x}$ \\
    $\hat{x}$ \\
    $\tilde{x}$ \\
    $\vec{x}$ \\
    $\mathring{x}$ \\
    $\dot{x} \ddot{x} \dddot{x} \ddddot{x}$ \\
    $\smash{\underline{xy} \overline{xy}}$
  \end{CodeExample}

  \begin{CodeExample}{0.7}[{Auf Position des Akzents achten:}]
    \begin{lstlisting}
      \hat{x_\text{min}}
      \hat{x}_\text{min}
    \end{lstlisting}
  \CodeResult
    \strut
    \Umathordordspacing\textstyle=4mu
    $\hat{x_\text{min}}$\\
    $\hat{x}_\text{min}$
  \end{CodeExample}
\end{frame}

\begin{frame}[fragile]{Funktionen}
  \begin{CodeExample}{0.65}
    \begin{lstlisting}
      x \sin y
      x \sin(y)
      \cos \tan \exp \ln \log_{10}(x)

      \lim_{x \to \infty} x^2
    \end{lstlisting}
  \CodeResult
    \strut
    $x \sin y$ \\
    $x \sin(y)$ \\
    $\cos \tan \exp \ln \log_{10}(x)$ \\[1\baselineskip]
    $\displaystyle \lim_{x \to \infty} x^2$
  \end{CodeExample}
  \vspace*{-2pt}
  \begin{CodeExample}{0.65}[Man kann auch eigene Funktionen definieren:]
    \begin{lstlisting}
      % direkt in der Matheumgebung:
      \operatorname{xyz}_i(a)
      \operatorname*{xyz}_i(a)

      % in Präambel definieren
      \DeclareMathOperator{\xyz}{xyz}
      \DeclareMathOperator*{\Xyz}{Xyz}
      % dann überall im Dokument nutzbar:
      \xyz_i(a)
      \Xyz_i(a)
    \end{lstlisting}
  \CodeResult
    \strut \\
    $\operatorname{xyz}_i(a)$ \\
    $\smash{\displaystyle \operatorname*{xyz}_i(a)}$ \\
    \ \\[3.5\baselineskip]
    $\operatorname{xyz}_i(a)$ \\
    $\displaystyle \operatorname*{Xyz}_i(a)$
  \end{CodeExample}
\end{frame}

\begin{frame}[fragile]{Große Operatoren}
  \begin{CodeExample}{0.65}
    \vspace{\baselineskip}
    \begin{lstlisting}
      \sum_{i=0}^\infty x_i


      \prod_{x \neq 0}


      \int_0^1 \iiint \oint


      \int_{0}^{1} f(x) \, \symup{d}x

    \end{lstlisting}
  \CodeResult
  \begin{minipage}[c][3\baselineskip][c]{0.9\textwidth}
      $\displaystyle \sum_{i=0}^\infty x_i$
    \end{minipage} \\\nointerlineskip
    \begin{minipage}[c][3\baselineskip][c]{\textwidth}
      $\displaystyle \prod_{x \neq 0}$
    \end{minipage} \\\nointerlineskip
    \begin{minipage}[c][3\baselineskip][c]{\textwidth}
      $\displaystyle \smash{\int_0^1} \iiint \oint$
    \end{minipage} \\\nointerlineskip
    \begin{minipage}[c][3\baselineskip][c]{\textwidth}
      $\displaystyle \int_{0}^{1} f(x) \, \symup{d}x $
    \end{minipage}
  \end{CodeExample}
\end{frame}

\begin{frame}[fragile]{Auslassungspunkte}
  Auslassungspunkte sind sehr … wichtig.
  \begin{CodeExample}{0.5}
    \begin{lstlisting}
      a_1,    \dotsc , a_n
      a_1 +   \dotsb + a_n
      a_1     \dotsm   a_n
      \int^{} \dotsi \int^{}
    \end{lstlisting}
  \CodeResult
    \strut
    $a_1,    \dotsc , a_n$ \\
    $a_1 +   \dotsb + a_n$ \\
    $a_1     \dotsm   a_n$ \\
    $\int^{} \dotsi \int^{}$
  \end{CodeExample}

  Für andere Fälle gibt es Befehle mit festen Positionen:
  \begin{CodeExample}{0.5}
    \begin{lstlisting}
      x \ldots x
      x \cdots x
        \vdots
        \ddots
        \adots
    \end{lstlisting}
  \CodeResult
    \strut
    $x \ldots x$ \\
    $x \cdots x$ \\
    $\vdots$ \\
    $\ddots$ \\
    $\adots$
  \end{CodeExample}

  Im Text kann man einfach \lstinline+\dots+ benutzen.
\end{frame}

\begin{frame}[fragile]{
  Fonts
  \hfill
  \doc{http://mirrors.ctan.org/macros/latex/contrib/unicode-math/unicode-math.pdf}{unicode-math}
}
  \begin{CodeExample}{0.70}
    \begin{lstlisting}
      x \alpha \symup{x \alpha}
      \symbf{x\alpha}
      \symbfsf{x \alpha}
      \symbb{R N 1 0 x}
      \symcal{I A O} \symbfcal{I A O}
      \symfrak{A B c} \symbffrak{A B c}
    \end{lstlisting}
  \CodeResult
    \strut
    \Umathordordspacing\textstyle=4mu
    $x \alpha \symup{x \alpha}$ \\
    $\symbf{x \alpha}$ \\
    $\symbfsf{x \alpha}$ \\
    $\symbb{R N 1 0 x}$ \\
    $\symcal{I A O} \symbfcal{I A O}$ \\
    $\symfrak{A B c} \symbffrak{A B c}$
  \end{CodeExample}

  Für mehrbuchstabige Bezeichungen gibt es andere Befehle:
  \begin{CodeExample}{0.70}
    \begin{lstlisting}
      Re \mathit{Re}
      diff \quad \mathit{diff}
      \mathbf{NP} \subseteq \mathbf{PSPACE}
    \end{lstlisting}
  \CodeResult
    \strut
    $Re \quad \mathit{Re}$ \\
    $diff \quad \mathit{diff}$ \\
    $\mathbf{NP} \subseteq \mathbf{PSPACE}$
  \end{CodeExample}
\end{frame}

\begin{frame}[fragile]{Spaces}
  Manchmal muss man manuell eingreifen, um das Spacing zu perfektionieren.
  \vspace{-1em}
  \begin{CodeExample}{0.48}
    \begin{lstlisting}
      % Kein Space
      \,
      \:
      \;
      \quad
      \qquad
    \end{lstlisting}
  \CodeResult
    \strut
    $\Rightarrow\mspace{-2mu} \Leftarrow$ \\
    $\Rightarrow\mspace{-2mu} \,\Leftarrow$ \\
    $\Rightarrow\mspace{-2mu} \:\Leftarrow$ \\
    $\Rightarrow\mspace{-2mu} \;\Leftarrow$ \\
    $\Rightarrow\mspace{-2mu} \quad\Leftarrow$ \\
    $\Rightarrow\mspace{-2mu} \qquad\Leftarrow$
  \end{CodeExample}
  Negativer Space um zu viel Platz zu korrigieren:
  \vspace{-1em}
  \begin{CodeExample}{0.48}
    \begin{lstlisting}
      % kein Space
      \! % negativer \,
    \end{lstlisting}
  \CodeResult
    \strut
    $\Rightarrow\mspace{-2mu} \Leftarrow$ \\
    $\Rightarrow\mspace{-2mu} \!\Leftarrow$
  \end{CodeExample}
  \begin{CodeExample}{0.48}
    \begin{lstlisting}
      ^2       ^{\!\! 2}

    \end{lstlisting}
  \CodeResult
    \begin{minipage}[c][2\baselineskip][c]{\textwidth}
      ${\displaystyle \left( \frac{2^2}{2} \right)^2}$
      \qquad
      ${\displaystyle \left( \frac{2^2}{2} \right)^{\!\! 2}}$
    \end{minipage}
  \end{CodeExample}
\end{frame}

\begin{frame}[fragile]{Klammern}
  \vspace{-1.5em}
  \begin{CodeExample}{0.71}
    \begin{lstlisting}
      (x) [x] \{x\} \langle x\rangle
      \lvert x\rvert \lVert x\rVert
    \end{lstlisting}
  \CodeResult
    \strut
    \Umathcloseopenspacing\textstyle=4mu
    $(x) [x] \{x\} \langle x\rangle $\\
    $\lvert x\rvert \lVert x\rVert$
  \end{CodeExample}

  \begin{CodeExample}{0.71}[Häufig braucht man größere Klammern]
    \begin{lstlisting}
      \bigl(x\bigr) \Bigl(x\Bigr) \biggl(x\biggr) \Biggl(x\Biggr)

      \bigl<x\bigr> \bigl|x\bigr| \bigl\|x\bigr\|
    \end{lstlisting}
  \CodeResult
    \begin{minipage}[c][2\baselineskip][c]{\textwidth}
      $\bigl(x\bigr) \Bigl(x\Bigr) \biggl(x\biggr) \Biggl(x\Biggr)$
    \end{minipage} \\[\baselineskip]\nointerlineskip
    $\bigl< x\bigr> \; \bigl|x\bigr| \; \bigl\|x\bigr\|$
  \end{CodeExample}
\end{frame}

\begin{frame}[fragile]{Klammern: Automatische Größe}
  \begin{itemize}
    \item Größe des Ausdrucks zwischen \lstinline+\left+ und \lstinline+\right+ bestimmt Größe der Klammern
    \item Ein \lstinline+\left+ muss in der gleichen Zeile wieder mit \lstinline+\right+ geschlossen werden
    \item \lstinline+\left.+ oder \lstinline+\right.+ falls nur eine Klammer gewünscht wird
  \end{itemize}
  \begin{CodeExample}{0.76}
    \begin{lstlisting}
      \left(\frac{1}{2} \right) \left(\frac{1}{2}\right.


      \left\{x \,\middle|\, x<\frac{1}{2} \right\}
    \end{lstlisting}
  \CodeResult
    $\left(\frac{1}{2}\right) \qquad \left(\frac{1}{2}\right.$ \\[2\baselineskip]
      $\left\{ x \, \middle| \, x < \frac{1}{2} \right\}$
  \end{CodeExample}

  \begin{CodeExample}{0.76}[Hat kein optimales Spacing:]
    \begin{lstlisting}
      \sin(x)
      \sin\left(x\right)
      \sin\!\left(x\right)
    \end{lstlisting}
  \CodeResult
    \strut
    $\sin(x)$ \\
    $\sin\left(x\right)$ \\
    $\sin\!\left(x\right)$
  \end{CodeExample}
\end{frame}

\begin{frame}[fragile]{
  Symbol-Sammlung
  \hfill
  \doc{http://mirrors.ctan.org/info/symbols/comprehensive/symbols-a4.pdf}{symbols-a4}
  \doc{http://mirrors.ctan.org/macros/latex/contrib/unicode-math/unimath-symbols.pdf}{unimath-symbols}
}
  Praktischer Link: \\
  \href{http://detexify.kirelabs.org/classify.html}{http://detexify.kirelabs.org/classify.html} \\
  (Symbol malen und \LaTeX-Code angezeigt bekommen)
\end{frame}

\begin{frame}[fragile]{Konventionen: Variablen, Zahlen, Einheiten, Indizes}
  \begin{itemize}
    \item Variablen/Größen werden kursiv gesetzt
    \item Mathematikmodus: alles erstmal Variable
    \item Alles, was keine Variable ist: aufrecht
      \begin{itemize}
        \item Konstanten: $\symup{e}$, $\symup{i}$, $\symup{\pi}$
          \smallskip
          \begin{lstlisting}
            $\symup{e}$, $\symup{i}$, $\symup{\pi}$
          \end{lstlisting}
          \medskip
        \item Infinitesimales: $\symup{d}x$
          \smallskip
          \begin{lstlisting}
            $\symup{d}x$
          \end{lstlisting}
          \medskip
        \item Indizes wie \enquote{min} oder \enquote{max}
          \smallskip
          \begin{lstlisting}
            x_\text{min}
          \end{lstlisting}
      \end{itemize}
    \item Vektoren und Matritzen: fett\\
      \lstinline+$\symbf{r} = (0, 1, -1)^\top$+ $\symbf{r} = (0, 1, -1)^\top$

  \end{itemize}
\end{frame}

\begin{frame}[fragile]{Konventionen: Variablen, Zahlen, Einheiten, Indizes}
  \begin{itemize}
    \item $\symup{d}x$ wird durch kleines Leerzeichen (\verb+\,+) vom Integranden abgetrennt
    \item \verb+\,+ auch zwischen verschiedenen $\symup{d}x_i$
  \end{itemize}

  \begin{equation*}
    \int_0^1 \int_0^{\symup{\pi}} \int_0^{2 \symup{\pi}}
    r^2 \sin(\vartheta) \,
    \symup{d}\phi \, \symup{d}\vartheta \, \symup{d}r
    = \frac{4}{3} \symup{\pi}
  \end{equation*}

  \vspace{1em}
  \qquad
  \begin{minipage}{0.8\textwidth}
    \begin{lstlisting}
      \int_0^1   \int_0^{\symup{\pi}}   \int_0^{2 \symup{\pi}}
      r^2 \sin(\vartheta)
      \, \symup{d}\varphi \, \symup{d}\vartheta \, \symup{d}r
      = \frac{4}{3} \symup{\pi}
    \end{lstlisting}
  \end{minipage}
\end{frame}
